@model practice.Models.Survey

@{
    ViewData["Title"] = @Model.Name;
}

<style>
    .question-block {
        border: 1px solid #ccc;
        padding: 15px;
        margin: 15px 0;
        border-radius: 8px;
    }

    .answer-option {
        display: block;
        padding: 5px;
        margin: 3px 0;
        border-radius: 4px;
        transition: background-color 0.2s;
    }

        .answer-option:hover {
            background-color: #f0f0f0;
        }

    .submit-button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
    }

        .submit-button:hover {
            background-color: #45a049;
        }
</style>

<h1>@Model.Name</h1>
<p><strong>Тема:</strong> @Model.Topic</p>
<p><strong>Хештеги:</strong> @string.Join(", ", Model.Hashtags.Select(h => h.Tag))</p>

<form id="surveyForm">
    @for (int i = 0; i < Model.Questions.Count; i++)
    {
        var question = Model.Questions[i];
        <div class="question-block">
            <p><strong>@(i + 1). @question.Text</strong></p>
            @for (int j = 0; j < question.Answers.Count; j++)
            {
                var answer = question.Answers[j];
                <label class="answer-option">
                    <input type="radio"
                           name="question_@i"
                           value="@answer.Text" />
                    @answer.Text
                </label>
            }
        </div>
    }

    <button type="button" class="submit-button" onclick="submitSurvey()">Відправити</button>
</form>

<script>
    function submitSurvey() {
        const questionsCount = @Model.Questions.Count;
        for (let i = 0; i < questionsCount; i++) {
            const selected = document.querySelector('input[name="question_' + i + '"]:checked');
            if (!selected) {
                alert("Будь ласка, оберіть відповідь для кожного питання перед відправкою.");
                return;
            }
        }

        alert("Дякуємо за проходження опитування!");
        window.location.href = "/home"; // Переход на /home после завершения
    }
</script>
